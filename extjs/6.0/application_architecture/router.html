<!DOCTYPE html><html><head> 
  <link href="../css/main.css" rel="stylesheet" type="text/css" /> 
  <script type="text/javascript" src="../MarkdownWebapp/MarkdownWebapp.nocache.js"></script> 
  <script type="text/javascript" src="../ace/ace.js"></script> 
  <link rel="icon" type="image/x-icon" href="../favicon.ico" /> 
  <script type="text/javascript">window["_GOOG_TRANS_EXT_VER"] = "1";</script> 
  <title>Ext JS 向导 | 使用路由</title> 
  <meta charset="UTF-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1" /> 
  <script async type="text/javascript" src="../../../../https@use.typekit.com/bqo8qzg.js"></script> 
  <script type="text/javascript">

    function showMenu(link_obj){
      var menu = document.getElementById("tpl-toc");

      link_obj.innerHTML = (link_obj.innerHTML == 'CLOSE MENU') ? 'MENU' : 'CLOSE MENU';

      if(menu.style.display == 'block'){
         menu.style.display = 'none';
      }else{
         menu.style.display = 'block';
      }
    }

  </script> 
 </head> 
 <body> 
  <div id="header"> 
   <a href="../../../../www.sencha.com/default.htm"><img class="sencha-logo" src="../images/logo.png" /></a> 
   <h1 id="current-product"><a href="#">Ext JS 向导 ▼</a></h1> 
   <div id="mobile_menu"> 
    <a id="mobile_menu_link" onclick="showMenu(this);" href="#">MENU</a> 
   </div> 
    
  </div> 
  <div id="content" itemscope="" itemtype="http://schema.org/Article"> 
   <div id="tpl-toc"> 
    <div id="tpl-toc-content"> 
     <a class="toggle-button" href="#">expand</a> 
     <ul> 
      <li class="file"><a href="../../../default.htm" data-full-load="true" title="Home">Sencha 向导</a></li> 
      <li class="file"><a href="../index.html" title="Guide Home">Sencha Ext JS 向导</a></li> 
      <li class="folder"><a href="#">快速入门</a> 
       <ul expand="false"> 
        <li class="file"><a href="../getting_started/getting_started.html" title="Get Started">安装 &amp; 快速入门</a></li> 
        <li class="file"><a href="../getting_started/extjs_faq.html" title="">Ext JS - 问答</a></li> 
        <li class="file"><a href="../getting_started/login_app.html" title="">创建一个简单的登录应用</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">Ext JS 6 API 文档</a> 
       <ul expand="false"> 
        <li class="file"><a href="../6.0.2-classic/default.htm" data-full-load="true" title="Api Docs">Ext JS 6.0.2 Classic API 文档</a></li> 
        <li class="file"><a href="../6.0.2-modern/default.htm" data-full-load="true" title="Api Docs">Ext JS 6.0.2 Modern API 文档</a></li> 
        <li class="file"><a href="../6.0.1-classic/default.htm" data-full-load="true" title="Api Docs">Ext JS 6.0.1 Classic API 文档</a></li> 
        <li class="file"><a href="../6.0.1-modern/default.htm" data-full-load="true" title="Api Docs">Ext JS 6.0.1 Modern API 文档</a></li> 
        <li class="file"><a href="../6.0.0-classic/default.htm" data-full-load="true" title="Api Docs">Ext JS 6.0.0 Classic API 文档</a></li> 
        <li class="file"><a href="../6.0.0-modern/default.htm" data-full-load="true" title="Api Docs">Ext JS 6.0.0 Modern API 文档</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">API 版本差异</a> 
       <ul expand="false"> 
        <li class="file"><a href="../api_diffs/602_classic_diff.html" title="Between 5.1.1 &amp; 6.0.0">Between 6.0.1 &amp; 6.0.2 Classic</a></li> 
        <li class="file"><a href="../api_diffs/602_modern_diff.html" title="Between 5.1.1 &amp; 6.0.0">Between 6.0.1 &amp; 6.0.2 Modern</a></li> 
        <li class="file"><a href="../api_diffs/601_classic_diff.html" title="Between 5.1.1 &amp; 6.0.0">Between 6.0.0 &amp; 6.0.1 Classic</a></li> 
        <li class="file"><a href="../api_diffs/601_modern_diff.html" title="Between Touch 2.4.2 &amp; 6.0.0">Between 6.0.0 &amp; 6.0.1 Modern</a></li> 
        <li class="file"><a href="../api_diffs/600_classic_diff.html" title="Between 5.1.1 &amp; 6.0.0">Between 5.1.1 &amp; 6.0.0 Classic</a></li> 
        <li class="file"><a href="../api_diffs/600_modern_diff.html" title="Between Touch 2.4.2 &amp; 6.0.0">Between Touch 2.4.2 &amp; 6.0.0 Modern</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">Examples</a> 
       <ul expand="false"> 
        <li class="file"><a href="../../../../examples.sencha.com/extjs/6.0.2/examples/default.htm" data-full-load="true" title="">6.0.2 Examples</a></li> 
        <li class="file"><a href="../../../../examples.sencha.com/extjs/6.0.1/examples/default.htm" data-full-load="true" title="">6.0.1 Examples</a></li> 
        <li class="file"><a href="../../../../examples.sencha.com/extjs/6.0.0/examples/default.htm" data-full-load="true" title="">6.0.0 Examples</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">新特性</a> 
       <ul expand="false"> 
        <li class="file"><a href="../whats_new/release_notes.html" title="">版本发布说明</a></li> 
        <li class="file"><a href="../whats_new/whats_new.html" title="">Ext JS 6 新特性</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">升级 &amp; 迁移</a> 
       <ul expand="false"> 
        <li class="file"><a href="../upgrades_migrations/extjs_upgrade_guide.html" title="">Ext JS 5 到 6 - 升级向导</a></li> 
        <li class="file"><a href="../upgrades_migrations/modern_upgrade_guide.html" title="">Touch 2.4 to 6 - 升级向导</a></li> 
        <li class="file"><a href="../upgrades_migrations/pivot_grid_update_guide.html" title="">Ext JS 6 - Pivot Grid 升级向导</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">核心思想</a> 
       <ul expand="false"> 
        <li class="file"><a href="../core_concepts/classes.html" title="The 类系统">类系统</a></li> 
        <li class="file"><a href="../core_concepts/layouts.html" title="布局和容器">布局和容器</a></li> 
        <li class="file"><a href="../core_concepts/components.html" title="Components">Components</a></li> 
        <li class="file"><a href="../core_concepts/data_package.html" title="数据封装">数据封装</a></li> 
        <li class="file"><a href="../core_concepts/events.html" title="Events in Ext JS">事件和手势</a></li> 
        <li class="file"><a href="../core_concepts/drag_drop.html" title="拖放">拖放</a></li> 
        <li class="file"><a href="../core_concepts/theming.html" title="Theming Ext JS">主题</a></li> 
        <li class="file"><a href="../core_concepts/memory_management.html" title="">内存管理</a></li> 
        <li class="file"><a href="../core_concepts/accessibility.html" title="无障碍">无障碍</a></li> 
        <li class="file"><a href="../core_concepts/localization.html" title="本地化">本地化</a></li> 
        <li class="file"><a href="../core_concepts/rtl.html" title="Right to Left in Ext JS">Right to Left in Ext JS</a></li> 
        <li class="file"><a href="../core_concepts/font_ext.html" title="">Sencha 字体包</a><span class="tpl-toc-img-new">★</span></li> 
        <li class="file"><a href="../core_concepts/tablet_support.html" title="平板设备支持">平板设备支持</a></li> 
        <li class="folder"><a href="#">绘图封装</a> 
         <ul expand="false"> 
          <li class="file"><a href="../core_concepts/draw/drawing.html" title="">绘图封装</a></li> 
          <li class="file"><a href="../core_concepts/draw/creating_images_with_draw_pt1.html" title="">Creating Images with Draw - Part 1</a></li> 
          <li class="file"><a href="../core_concepts/draw/creating_images_with_draw_pt2.html" title="">Creating Images with Draw - Part 2</a></li> 
          <li class="file"><a href="../core_concepts/draw/creating_images_with_draw_pt3.html" title="">Creating Images with Draw - Part 3</a></li> 
         </ul></li> 
       </ul></li> 
      <li class="folder"><a href="#">架构</a> 
       <ul expand="false"> 
        <li class="file"><a href="application_architecture.html" title="应用程序架构介绍">应用程序架构介绍</a></li> 
        <li class="file"><a href="developing_for_multiple_screens_and_environments.html" title="应用程序架构介绍">多屏幕开发</a></li> 
        <li class="file"><a href="view_controllers.html" title="视图控制器View Controllers">视图控制器View Controllers</a></li> 
        <li class="file"><a href="view_models_data_binding.html" title="View Models &amp; 数据绑定">View Models &amp; 数据绑定</a></li> 
        <li class="file"><a href="view_model_internals.html" title="View Models Internals">View Model 内部机制</a></li> 
        <li class="file"><a href="router.html" title="使用路由">使用路由</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">UI 组件</a> 
       <ul expand="false"> 
        <li class="file"><a href="../components/forms.html" title="Forms">Forms</a></li> 
        <li class="file"><a href="../components/introduction_to_charting.html" title="图表Charts介绍">图表Charts介绍</a></li> 
        <li class="file"><a href="../components/trees.html" title="Trees">Trees</a></li> 
        <li class="file"><a href="../components/grids.html" title="Grids">Grids</a></li> 
        <li class="file"><a href="../components/pivot_grid.html" title="Pivot Grid">Pivot Grid</a><span class="tpl-toc-img-new">★</span></li> 
        <li class="file"><a href="../components/widgets_widgets_columns.html" title="Widgets and Widget Columns">Widgets and Widget Columns</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">后台连接</a> 
       <ul expand="false"> 
        <li class="file"><a href="../backend_connectors/soap.html" title="SOAP服务">SOAP服务</a></li> 
        <li class="file"><a href="../backend_connectors/amf.html" title="AMF 数据源">AMF 数据源</a></li> 
        <li class="folder"><a href="#">Ext Direct</a> 
         <ul expand="false"> 
          <li class="file"><a href="../backend_connectors/direct/specification.html" title="Ext Direct 说明">Ext Direct 说明</a><span class="tpl-toc-img-new">★</span></li> 
          <li class="file"><a href="../backend_connectors/direct/mysql_php.html" title="Ext Direct 结合 MySQL 和 PHP">Ext Direct 结合 MySQL 和 PHP</a><span class="tpl-toc-img-new">★</span></li> 
         </ul></li> 
       </ul></li> 
      <li class="folder"><a href="#">其它</a> 
       <ul expand="false"> 
        <li class="file"><a href="../other_resources/oop_concepts.html" title="">OOP基础</a><span class="tpl-toc-img-new">★</span></li> 
        <li class="file"><a href="../other_resources/ecosystem.html" title="">Ext JS 生态</a></li> 
        <li class="file"><a href="../other_resources/sencha_blog.html" title="">来自 Sencha 博客</a></li> 
       </ul></li> 
      <li class="file"><a href="../supported_browsers.html" title="支持的浏览器">支持的浏览器</a></li> 
     </ul> 
    </div> 
   </div> 
   <div id="middle"> 
    <div id="tpl-content"> 
     <div> 
      <div class="toc-page" style="display:block;">
        Contents 
       <a class="toc-page-h2" href="#What_Routing_Is_Used_For" title="路由用来做什么">路由用来做什么</a> 
       <a class="toc-page-h2" href="#What_Routing_Is_Not_Used_For" title="路由不能用来做什么">路由不能用来做什么</a> 
       <a class="toc-page-h2" href="#What_is_the_Hash_" title=" Hash 是什么?"> Hash 是什么?</a> 
       <a class="toc-page-h2" href="#Implement_Routing_in_your_Application" title="在应用程序中实现路由">在应用程序中实现路由</a> 
       <a class="toc-page-h2" href="#Updating_the_Hash" title="更新 Hash ">更新 Hash </a> 
       <a class="toc-page-h2" href="#Default_Token" title="默认令牌">默认令牌</a> 
       <a class="toc-page-h2" href="#Hashes_with_Parameters" title="带参数的 Hash ">带参数的 Hash </a> 
       <a class="toc-page-h2" href="#Hash_Parameter_Formatting" title=" Hash 参数格式化"> Hash 参数格式化</a> 
       <a class="toc-page-h2" href="#Route_Handling" title="路由处理">路由处理</a> 
       <a class="toc-page-h2" href="#Handling_Unmatched_Routes" title="处理不匹配的路由">处理不匹配的路由</a> 
       <a class="toc-page-h2" href="#Using_Multiple_Routes_in_a_Single_Hash" title="在一个单一 Hash 中使用多条路由">在一个单一 Hash 中使用多条路由</a> 
      </div> 
      <div id="tpl-content-name" itemprop="name"> 
       <h1>用Router(路由)来控制应用程序</h1> 
      </div> 
      <div id="tpl-content-articleBody" itemprop="articleBody"> 
       <p>在一个普通的网站上,用户通过点击链接或者是填写表单来在不同页面间导航. 然而,在一个单页的应用程序中, 用户的交互不会加载一个新的页面. 取而代之的是在一个单页面用组件来对用户的交互进行响应. 那么你如何让用户使用浏览器的前进和后退按钮呢? 答案是用Ext JS 5的新的路由功能来响应 URI 的 Hash 变化.</p> 
       <h2 id="What_Routing_Is_Used_For">路由用来做什么</h2> 
       <p>路由能够通过使用浏览器的历史记录堆栈, 来跟踪应用程序的状态. 路由也允许深入链接到应用程序中的特定部分.</p> 
       <h2 id="What_Routing_Is_Not_Used_For">路由不能用来做什么</h2> 
       <p>路由应该不要用来存储任何数据和会话信息, 数据应该存储在一个持久的数据源中, 例如 cookies 或者是本地存储. 路由仅仅是跟踪应用程序状态的一种手段.</p> 
       <h2 id="What_is_the_Hash_">Hash是什么?</h2> 
       <p>浏览器通过使用由很多部分构成的 URI 来浏览互联网. 让我们来看一个简单的URI:</p> 
       <pre mode="javascript" theme="chrome"><code>http://www.example.com/apps/users#user/1234</code></pre> 
       <p>这个应该看起来比较熟悉. 然而你可能不认识 <code>#user=1234</code>. URI 的这个部分叫做 “hash” 或者是片断标识符. 关于 hash 更为详细的信息, 请阅读资源 <a href="http://en.wikipedia.org/wiki/Fragment_identifier">http://en.wikipedia.org/wiki/Fragment_identifier</a>. 这个 hash 为应用程序提供了一个不重新加载当前页来控制浏览器的历史堆栈的方法. 由于 Hash 的变化, 浏览器将整个 URI 添加到历史堆栈，然后允许您使用浏览器的前进/后退按钮遍历 URI. 例如,将 hash 值更新为下面这样会发生什么:</p> 
       <pre mode="javascript" theme="chrome"><code>http://www.example.com/apps/users#user/5678</code></pre> 
       <p>浏览器会触 发一个我们能在应用程序里使用的 <code>hashchange</code> 事件.<br />用户然后能点击返回按钮返回到这个 <code>#user=1234</code> 的 hash 值. 此通知将允许您对应用程序中的更改作出反应. 有一点要注意的是 Hash 并没有发送给服务器. 这个 Hash 在客户端解析 URI 中被消化了. Ext Router (路由)依靠浏览器的 Hash 功能来允许应用程序的状态跟踪和深度链接. </p> 
       <h2 id="Implement_Routing_in_your_Application">在应用程序中实现路由</h2> 
       <p>路由类是 Ext JS 5 新加功能, 目的是为了在 MVC 应用程序中可以很简单的处理 Hash 的变化. 我们有一个 Ext.util.History, 用于对 Hash 的变化作出反应. 然而这个 Ext.util.History 提供了更多手动的过程, 并且需要一个合适的路由类. Router (路由) 提供了一种简单的方式就可以集成到Ext JS 5 的MVC应用程序中, 只要在视图控制器中定义路由规则即可. 路由是匹配 Hash 的一个字符串, 并且允许在你的 Ext 应用程序中进行深度链接. 这里是一个实现了路由功能的简单示例控制器:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.define('MyApp.view.main.MainController', {
    extend : 'Ext.app.ViewController',

    routes : {
        'users' : 'onUsers'
    },

    onUsers : function() {
        //...
    }
});</code></pre> 
       <p>这个路由会对 <code>#users</code>  Hash 作出反应, 然后在控制器实例作用域下执行 <code>onUsers</code> 方法. 正如你所看到的, routes 配置是放置在 <code>config</code> 对象中的，而不是在根部.</p> 
       <h2 id="Updating_the_Hash">更新 Hash </h2> 
       <p>为更新 Hash ,控制器有一个 redirectTo 方法.</p> 
       <pre mode="javascript" theme="chrome"><code>this.redirectTo('user/1234');</code></pre> 
       <p>这将更新 Hash 为 <code>&quot;#user/1234&quot;</code> ,然后路由配置了识别这个 Hash 和要运行的内容. 有时要更新的 Hash 可能与当前值相同. 在这种情况下, <code>redirectTo 方法会返回 </code><code>false</code> , 然后不会更新 Hash, 从而不会运行路由配置中的方法.<code>redirectTo</code> 也可以接受第二个参数传递 true 值来强制路由对 Hash 做出反应.</p> 
       <pre mode="javascript" theme="chrome"><code>this.redirectTo('user/1234', true);</code></pre> 
       <p>尽管当前的 Hash 匹配传到 <code>redirectTo的值</code>, 这个路由仍然会执行任何匹配的路线.</p> 
       <h2 id="Default_Token">默认令牌</h2> 
       <p>当应用程序启动时如果没有提供 Hash 可以在配置中增加一个默认值.例如,当 #home Hash 使用时应用程序显示一个仪表盘,如果没有其它 Hash 存在,你就需要增回 #home  Hash 给 URI. 为启用一个默认 Hash ,你能在应用程序里找到的 <code>/app/view/Application.js</code> 文件中使用 <code>defaultToken</code> 配置项:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.define('MyApp.Application', {
    extend : 'Ext.app.Application',你参在

    //...

    defaultToken : 'home'
});</code></pre> 
       <p>当应用程序启动时, 会检查URI的当前 Hash. 如果有一个 Hash 定义了, 就会运行对应的路由处理方法. 如果没有 Hash, 就会将 <code>#home</code>  Hash 加入, 然后运行相应路由处理函数来进行适当的处理.</p> 
       <h2 id="Hashes_with_Parameters">带参数的 Hash </h2> 
       <p>应用程序也能在 Hash 里使用参数. 比如你可能要在 Hash 中包含一个用户的 ID 做为一个参数. 我们在这篇指南中早前提到过使用 <code>#user/1234 做为一个 Hash </code>. 在这个例子中, 我们要让<code>1234</code>做为一个 id 参数. 你要设置你的控制器对 <code>#user/1234</code>  Hash 作出响应:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.define('MyApp.view.main.MainController', {
    extend : 'Ext.app.ViewController',

    routes : {
        'user/:id' : 'onUser'
    },

    onUser : function(id) {
        //...
    }
});</code></pre> 
       <p>我们使用的这个路由是 <code>'user/:id'</code> 和冒号, <code>:</code>. 这意味着有一个参数而且应用程序会将这个参数作为 onUser 方法一个参数传入. 该方法会按照路由中指定的的顺序收到相同数量的参数, 这样就允许简单的包含多个参数.</p> 
       <h2 id="Hash_Parameter_Formatting">Hash 参数格式化</h2> 
       <p>该应用程序可能要给用户 ID 强制一个特定的格式. 在这个例子中, 我们目前看到的是个数字. 你还可以通过配置 conditions 来校验路由:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.define('MyApp.view.main.MainController', {
    extend : 'Ext.app.ViewController',

    routes : {
        'user/:id' : {
            action     : 'onUser',
            conditions : {
                ':id' : '([0-9]+)'
            }
        }
    },

    onUser : function(id) {
        //...
    }
});</code></pre> 
       <p>我们来看一下这个例子.首先, ‘onUser’ 方法现在移到了action 的配置项上. 这与我们传递字符串给路由类似.我们然后使用 conditions 配置项来提供一个对象. 我们要控制的关键字是参数名称和一个冒号然后跟着一个正则表达式字符串 (不是一个正则表达式对象). 对于 <code>:id</code> 条件, 我们用 <code>([0-9]+)</code>, 这个就只允许0-9之间的数字, 但是可以任意长度, 然后记住这个匹配关系. 因为正则表达式对象是用于匹配整个 Hash 的, 所以这里我们用字符串, 否则如果在路由中配置有多个参数, 我们就要将正则表达式字符串串成一个正则表达式对象. 如果没有为参数提供条件, 默认的是:</p> 
       <pre mode="javascript" theme="chrome"><code>([%a-zA-Z0-9\\-\\_\\s,]+)</code></pre> 
       <h2 id="Route_Handling">路由处理</h2> 
       <p>有时应用程序需要阻止路由的运行. 在这种情况下, 我们要检查管理权限来确定是否允许当前用户查看应用程序的某一部分. 路由可以配置一个 before action, 这个会停止当前的路由, 停止所有路由或者继续路由的运行.</p> 
       <p>这个例子会继续运行路由函数:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.define('MyApp.view.main.MainController', {
    extend : 'Ext.app.ViewController',

    routes : {
        'user/:id' : {
            before  : 'onBeforeUser',
            action  : 'onUser'
        }
    },

    onBeforeUser : function(id, action) {
        Ext.Ajax.request({
            url     : '/security/user/' + id,
            success : function() {
                action.resume();
            }
        });
    },

    onUser : function(id) {
        //...
    }
});</code></pre> 
       <p>在 <code>onBeforeUser</code> 方法中, 这个 <code>:id</code> 参数作为入参传入了,但最后一个参数是 <code>action</code>. 如果你在<code>action</code>上执行 <code>resume</code> 方法, 路由就会继续执行, 然后就会调用 <code>onUser</code> 方法. 注意我们在继续运行路由功能前, 我们要等待 AJAX 请求完成.</p> 
       <p>我们可以扩展这个示例, 通过运行 <code>stop</code> 方法来告诉应用停止运行当前的路由:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.define('MyApp.view.main.MainController', {
    extend : 'Ext.app.ViewController',

    routes : {
        'user/:id' : {
            before  : 'onBeforeUser',
            action  : 'onUser'
        }
    },

    onBeforeUser : function(id, action) {
        Ext.Ajax.request({
            url     : '/security/user/' + id,
            success : function() {
                action.resume();
            },
            failure : function() {
                action.stop();
            }
        });
    },

    onUser : function(id) {
        //...
    }
});</code></pre> 
       <p>Ext JS 应用程序可能相当复杂, 并且可能有许多控制器设置成监听同一路由. 然而只有一个控制器设置了 before 动作,因此只有一次 ajax 请求会被触发. 如果我们传递一个为  <code>true </code> 的参数给 <code>action</code> 的  <code>stop</code> 方法, 我们能够停止运行所有队列中的路由, 而不仅仅是当前的路由处理:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.define('MyApp.view.main.MainController', {
    extend : 'Ext.app.ViewController',

    routes : {
        'user/:id' : {
            before  : 'onBeforeUser',
            action  : 'onUser'
        }
    },

    onBeforeUser : function(id, action) {
        Ext.Ajax.request({
            url     : '/security/user/' + id,
            success : function() {
                action.resume();
            },
            failure : function() {
                action.stop(true);
            }
        });
    },

    onUser : function(id) {
        //...
    }
});</code></pre> 
       <p>现在, 当 ajax 请求失败时,我们传参 <code>true</code> 来取消所有控制器上的路由处理程序.</p> 
       <p><strong>注意:</strong> 如果你不运行<em><code>resume</code> 或者 <code>stop</code> 方法, 路由会被中断并且永远不会正确地完成. 重要的是在某个时间点上运行这二个方法中的任意一个.</em></p> 
       <h2 id="Handling_Unmatched_Routes">处理不匹配的路由</h2> 
       <p>如果这个 hash 发生了变化而没有找到相匹配的路由, 路由处理器将不会做任何事; 路由处理程序将不会尝试修改这个hash将会单独保留这个不匹配的hash值. 路由处理程序将会在应用程序实例中触发一个 <code>unmatchedroute</code> 事件, 这个事件在 <code>Ext.application</code> 中是可监听的:</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.application({
    name : 'MyApp',

    listen : {
        controller : {
            '#' : {
                unmatchedroute : 'onUnmatchedRoute'
            }
        }
    },

    onUnmatchedRoute : function(hash) {
        //...
    }
});</code></pre> 
       <h2 id="Using_Multiple_Routes_in_a_Single_Hash">在一个单一 Hash 中使用多个路由</h2> 
       <p>因为 Ext JS 应用程序能够做的非常复杂, 这就可能有时需要在一个单一 hash 中要使用多个路由. 路由(Router)支持这个功能, 因此不需要控制处理器中作额外的处理. 相反, 你能使用管道符号: <code>|</code>来分隔多个 hash . 一个hash例子可能是这样</p> 
       <pre mode="javascript" theme="chrome"><code>`#user/1234|messages`</code></pre> 
       <p>在这个情况下,我们要要对一个 id 为 1234 的用户显示详细信息, 但也要显示消息. 每个路由会按hash中指定的顺序运行. 它们互不影响. 简单来说, 如果你中止这个 <code>user/1234</code> 路由, <code>messages</code> 路由会继续运行. 重要的是要注意单个路由的运行顺序和路由在 hash 中出现的顺序是一样的. 在上面的例子中,这个<code>user/1234</code> 路由总是会在 <code>messages</code> 路由前执行.</p> 
       <p>通过改变 <code>Ext.app.route.Router.multipleToken</code> 属性, 你可以修改这个分隔符.</p> 
      </div> 
      <div class="tpl-content-lastUpdated">
        Last updated 
       <div id="tpl-content-lastUpdated-date" itemprop="datePublished" datetime="2016-04-01T12:27Z">
         April 1, 2016 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div id="footer"> 
   <div id="footer-social"> 
    <div class="g-plusone" data-size="medium" data-annotation="none"></div> 
   </div> 
   <div id="footer-content"> 
    <a href="../../../../www.sencha.com/products">Products</a> | 
    <a href="../../../../www.sencha.com/services">Services</a> | 
    <a href="../../../../www.sencha.com/support">Support</a> | 
    <a href="../../../../www.sencha.com/training">Training</a> | 
    <a href="../../../../www.sencha.com/partners">Partners</a> | 
    <a href="../../../../www.sencha.com/blog">Community</a> | 
    <a href="../../../../www.sencha.com/company">Company</a> 
   </div> 
  </div> 
  <div id="menu-product-container" style="display:none;"> 
   <div id="menu-dropdown"> 
    <div class="menu-landing-products"> 
     <div id="menu-vertical"> 
      <p class="menu-landing-product" rel="extjs"> <a> Sencha Ext JS </a> </p> 
      <p class="menu-landing-product" rel="cmd"> <a> Sencha Cmd </a> </p> 
      <p class="menu-landing-product" rel="sencha_test"> <a> Sencha Test </a> </p> 
      <p class="menu-landing-product" rel="ide_plugins"> <a> Sencha IDE Plugins </a> </p> 
      <p class="menu-landing-product" rel="sencha_inspector"> <a> Sencha Inspector </a> </p> 
      <p class="menu-landing-product" rel="gxt"> <a> Sencha GXT </a> </p> 
      <p class="menu-landing-product" rel="webappmgr"> <a> Sencha Web Application Manager </a> </p> 
      <p class="menu-landing-product" rel="architect"> <a> Sencha Architect </a> </p> 
      <p class="menu-landing-product" rel="touch"> <a> Sencha Touch </a> </p> 
     </div> 
    </div> 
    <div id="menu-product-details"> 
     <div id="extjs-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha Ext JS 
      </div> 
      <div class="menu-landing-doc-heading">
        6.x 
      </div> 
      <a href="../default.htm"> 6.0.2 </a> 
      <a class="menu-landing-zip" style="padding-right:0;" href="../../../downloads/extjs-docs-6.0.2-classic.zip"> (classic) </a> 
      <a class="menu-landing-zip menu-landing-lesspad" href="../../../downloads/extjs-docs-6.0.2-modern.zip"> (modern) </a> 
      <span class="tpl-toc-img-new">★</span> 
      <br /> 
      <a href="../default.htm"> 6.0.1 </a> 
      <a class="menu-landing-zip" style="padding-right:0;" href="../../../downloads/extjs-docs-6.0.1-classic.zip"> (classic) </a> 
      <a class="menu-landing-zip menu-landing-lesspad" href="../../../downloads/extjs-docs-6.0.1-modern.zip"> (modern) </a> 
      <span class="tpl-toc-img-new">★</span> 
      <br /> 
      <a href="../default.htm"> 6.0.0 </a> 
      <a class="menu-landing-zip" style="padding-right:0;" href="../../../downloads/extjs-docs-6.0.0-classic.zip"> (classic) </a> 
      <a class="menu-landing-zip" style="padding-left:0;" href="../../../downloads/extjs-docs-6.0.0-modern.zip"> (modern) </a> 
      <div class="menu-landing-doc-heading">
        5.1.x 
      </div> 
      <a href="../../5.1/default.htm"> 5.1.2 </a> 
      <a class="menu-landing-zip" href="../../../downloads/extjs-docs-5.1.2.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../5.1/default.htm"> 5.1.1 </a> 
      <a class="menu-landing-zip" href="../../../downloads/extjs-docs-5.1.1.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../5.1/default.htm"> 5.1.0 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/ext-docs-5.1.0.zip"> (offline docs) </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        5.0.x 
      </div> 
      <a href="../../5.0/default.htm"> 5.0.1 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/ext-docs-5.0.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../5.0/default.htm"> 5.0.0 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/ext-docs-5.0.0.zip"> (offline docs) </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        4.2.x 
      </div> 
      <a href="../../4.2.5/default.htm"> 4.2.5 </a> 
      <a class="menu-landing-zip" href="../../../downloads/extjs-docs-4.2.5.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../4.2.4/default.htm"> 4.2.4 </a> 
      <a class="menu-landing-zip" href="../../../downloads/extjs-docs-4.2.4.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../4.2.3/default.htm"> 4.2.3 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/extjs-docs-4.2.3.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../4.2.2/default.htm"> 4.2.2 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/extjs-docs-4.2.2.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../4.2.1/default.htm"> 4.2.1 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/extjs-docs-4.2.1.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../4.2.0/default.htm"> 4.2.0 </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        4.1.x 
      </div> 
      <a href="../../4.1.3/default.htm"> 4.1.3 </a> 
      <br /> 
      <a href="../../4.1.2/default.htm"> 4.1.2 </a> 
      <br /> 
      <a href="../../4.1.1/default.htm"> 4.1.1 </a> 
      <br /> 
      <a href="../../4.1.0/default.htm"> 4.1.0 </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        4.0.x 
      </div> 
      <a href="../../4.0.7/default.htm"> 4.0.7 </a> 
      <br /> 
      <a href="../../4.0.0/default.htm"> 4.0.0 </a> 
     </div> 
     <div id="cmd-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha Cmd 
      </div> 
      <div class="menu-landing-doc-heading">
        6.x 
      </div> 
      <a href="../../../cmd/6.x"> 6.x </a> 
      <span class="tpl-toc-img-new">★</span> 
      <br /> 
      <div class="menu-landing-doc-heading">
        5.x 
      </div> 
      <a href="../../../cmd/5.x"> 5.x </a> 
     </div> 
     <div id="sencha_test-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha Test 
      </div> 
      <a href="../../../sencha_test/index.html"> Sencha Test </a> 
      <span class="tpl-toc-img-new">★</span> 
     </div> 
     <div id="ide_plugins-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha IDE Plugins 
      </div> 
      <a href="../../../ide_plugins/jetbrains_ide_plugin.html"> JetBrains Plugin 6.x </a> 
      <span class="tpl-toc-img-new">★</span> 
      <br /> 
      <a href="../../../ide_plugins/eclipse_ide_plugin.html"> Eclipse Plugin </a> 
      <span class="tpl-toc-img-new">★</span> 
      <br /> 
      <a href="../../../ide_plugins/visual_studio_ide_plugin.html"> Visual Studio Plugin </a> 
      <span class="tpl-toc-img-new">★</span> 
     </div> 
     <div id="sencha_inspector-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha Inspector 
      </div> 
      <a href="../../../sencha_inspector/index.html"> Sencha Inspector 6.x </a> 
      <span class="tpl-toc-img-new">★</span> 
     </div> 
     <div id="gxt-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha GXT 
      </div> 
      <!-- GXT 4.0 --> 
      <div class="menu-landing-doc-heading">
        4.0 
       <span class="tpl-toc-img-new">★</span> 
      </div> 
      <a href="../../../../examples.sencha.com/gxt/4.0.1"> 4.0 Explorer Examples </a> 
      <br /> 
      <a href="../../../../examples.sencha.com/gxt-edash/4.0.1"> 4.0 Dashboard Example </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/gxt/examples-src/gxt-edash-4.0.1.zip"> (War) </a> 
      <br /> 
      <a href="../../../gxt/4.x/default.htm"> 4.0 Guides </a> 
      <br /> 
      <a href="../../../gxt/4.x/javadoc/gxt-4.0.0"> 4.0 Javadoc </a> 
      <br /> 
      <!-- GXT 3.1.x --> 
      <div class="menu-landing-doc-heading">
        3.1 
      </div> 
      <a href="../../../../www.sencha.com/examples/default.htm"> 3.1.4 Examples </a> 
      <br /> 
      <a href="../../../gxt/3.x/default.htm"> 3.1.4 Guides </a> 
      <br /> 
      <a href="../../../gxt/3.x/javadoc"> 3.1.4 Javadoc </a> 
      <br /> 
      <!-- GXT 3.0.x --> 
      <!-- GXT 2.x --> 
      <div class="menu-landing-doc-heading">
        2.0 
      </div> 
      <a href="../../../../https@www.sencha.com/examples-2/default.htm"> 2.3.1 Examples </a> 
     </div> 
     <div id="webappmgr-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha Web Application Manager 
      </div> 
      <div class="menu-landing-doc-heading">
        6.0.x 
      </div> 
      <a href="../../../webappmgr"> 6.0.0 </a> 
      <span class="tpl-toc-img-new">★</span> 
     </div> 
     <div id="architect-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha Architect 
      </div> 
      <div class="menu-landing-doc-heading">
        3.x 
      </div> 
      <a href="../../../architect/3.5/default.htm"> 3.5 </a> 
      <span class="tpl-toc-img-new">★</span> 
      <br /> 
      <a href="../../../architect/3/default.htm"> 3.2 </a> 
      <a class="menu-landing-zip menu-landing-lesspad" href="../../../../cdn.sencha.com/downloads/docs/architect-docs-3.zip"> (offline docs) </a> 
     </div> 
     <div id="touch-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        Sencha Touch 
      </div> 
      <div class="menu-landing-doc-heading">
        2.4.x 
      </div> 
      <a href="../../../touch/2.4/default.htm"> 2.4.2 </a> 
      <span class="tpl-toc-img-new">★</span> 
      <a class="menu-landing-zip menu-landing-lesspad" href="../../../downloads/touch-docs-2.4.2.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../../touch/2.4/default.htm"> 2.4.1 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/touch-docs-2.4.1.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../../touch/2.4/2.4.0-apidocs"> 2.4.0 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/touch-docs-2.4.0.zip"> (offline docs) </a> 
      <div class="menu-landing-doc-heading">
        2.3.x 
      </div> 
      <a href="../../../touch/2.3.1/default.htm"> 2.3.1 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/touch-docs-2.3.1.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../../touch/2.3.0/default.htm"> 2.3.0 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/touch-docs-2.3.0.zip"> (offline docs) </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.2.x 
      </div> 
      <a href="../../../touch/2.2.1/default.htm"> 2.2.1 </a> 
      <a class="menu-landing-zip" href="../../../../cdn.sencha.com/downloads/docs/touch-docs-2.2.1.zip"> (offline docs) </a> 
      <br /> 
      <a href="../../../touch/2.2.0/default.htm"> 2.2.0 </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.1.x 
      </div> 
      <a href="../../../touch/2.1.1/default.htm"> 2.1.1 </a> 
      <br /> 
      <a href="../../../touch/2.1.0/default.htm"> 2.1.0 </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.0.x 
      </div> 
      <a href="../../../touch/2.0.2/default.htm"> 2.0.2 </a> 
      <br /> 
      <a href="../../../touch/2.0.1/default.htm"> 2.0.1 </a> 
      <br /> 
      <a href="../../../touch/2.0.0/default.htm"> 2.0.0 </a> 
     </div> 
    </div> 
   </div> 
  </div> 
   
  <script type="text/javascript">
    adroll_adv_id = "5RM2BL5IGRFLRG5VDQ7OIE";
    adroll_pix_id = "LWO7UZXBFVESTOMYFI2LYS";
    /* OPTIONAL: provide email to improve user identification */
    /* adroll_email = "username_40example.com"; */
    (function () {
      var _onload = function(){
        if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
        if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
        var scr = document.createElement("script");
        var host = (("https:" == document.location.protocol) ? "../../../../https@s.adroll.com" : "../../../../a.adroll.com");
        scr.setAttribute('async', 'true');
        scr.type = "text/javascript";
        scr.src = host + "/j/roundtrip.js";
        ((document.getElementsByTagName('head') || [null])[0] ||
        document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
      };
      if (window.addEventListener) {window.addEventListener('load', _onload, false);}
      else {window.attachEvent('onload', _onload)}
    }());
  </script> 
  <script>
    var menu = document.getElementById("tpl-toc"),
        link_obj = document.getElementById("mobile_menu_link"),
        links = menu.querySelectorAll('a');

    for(i=0; i < links.length; i++) {
      links[i].onclick = function() {
        var mq = window.matchMedia('only screen and (max-width: 768px)');

        if(mq.matches) {
          menu.style.display = 'none';
          link_obj.innerHTML = 'MENU';
        }
      }
    }

  </script> 
  <script type="text/javascript">
    </script>              <script src='../../../../munchkin.marketo.net/munchkin-beta.js' type='text/javascript'></script><script>Munchkin.init('374-WES-121');</script>   
 
</body></html>